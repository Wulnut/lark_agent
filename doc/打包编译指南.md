# Lark Agent æ‰“åŒ…ç¼–è¯‘æŒ‡å—

## ğŸ“¦ æ‰“åŒ…æ–¹å¼

### æ–¹å¼ä¸€ï¼šæ„å»º Wheel åŒ…ï¼ˆæ¨èï¼‰

ä½¿ç”¨ `uv` æ„å»ºåˆ†å‘åŒ…ï¼š

```bash
# æ„å»º wheel åŒ…
uv build

# æ„å»ºç»“æœä¼šåœ¨ dist/ ç›®å½•ä¸‹
# ä¾‹å¦‚: dist/lark_agent-0.1.0-py3-none-any.whl
```

### æ–¹å¼äºŒï¼šæ„å»ºæºç åˆ†å‘åŒ…

```bash
# æ„å»ºæºç åˆ†å‘åŒ…ï¼ˆsdistï¼‰
uv build --sdist

# æ„å»ºç»“æœä¼šåœ¨ dist/ ç›®å½•ä¸‹
# ä¾‹å¦‚: dist/lark-agent-0.1.0.tar.gz
```

### æ–¹å¼ä¸‰ï¼šåŒæ—¶æ„å»º wheel å’Œ sdist

```bash
# æ„å»ºæ‰€æœ‰æ ¼å¼çš„åˆ†å‘åŒ…
uv build

# è¿™ä¼šåŒæ—¶ç”Ÿæˆ wheel å’Œ sdist
```

---

## ğŸš€ å®‰è£…æ–¹å¼

### ä»æœ¬åœ°æ„å»ºçš„åŒ…å®‰è£…

```bash
# å®‰è£…æœ¬åœ°æ„å»ºçš„ wheel åŒ…
uv tool install dist/lark_agent-0.1.0-py3-none-any.whl

# æˆ–ä»æºç å®‰è£…
uv tool install dist/lark-agent-0.1.0.tar.gz
```

### ä» Git ä»“åº“å®‰è£…ï¼ˆå‘å¸ƒåï¼‰

```bash
# ä» GitHub å®‰è£…
uv tool install --from git+https://github.com/Wulnut/lark_agent lark-agent

# å®‰è£…ç‰¹å®šç‰ˆæœ¬/tag
uv tool install --from git+https://github.com/Wulnut/lark_agent@v0.1.0 lark-agent
```

---

## ğŸ”§ å¼€å‘æ¨¡å¼å®‰è£…

### å¯ç¼–è¾‘å®‰è£…ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰

```bash
# åœ¨å½“å‰ç¯å¢ƒä¸­ä»¥å¯ç¼–è¾‘æ¨¡å¼å®‰è£…
uv pip install -e .

# è¿™æ ·ä¿®æ”¹ä»£ç åæ— éœ€é‡æ–°å®‰è£…å³å¯ç”Ÿæ•ˆ
```

---

## ğŸ“‹ æ„å»ºå‰æ£€æŸ¥æ¸…å•

1. âœ… **ç‰ˆæœ¬å·**: ç¡®è®¤ `pyproject.toml` ä¸­çš„ç‰ˆæœ¬å·æ­£ç¡®
2. âœ… **ä¾èµ–**: ç¡®è®¤æ‰€æœ‰ä¾èµ–éƒ½å·²æ­£ç¡®å£°æ˜
3. âœ… **å…¥å£ç‚¹**: ç¡®è®¤ `[project.scripts]` é…ç½®æ­£ç¡®
4. âœ… **æµ‹è¯•**: è¿è¡Œæµ‹è¯•ç¡®ä¿ä»£ç æ­£å¸¸
   ```bash
   uv run pytest
   ```
5. âœ… **ä»£ç è´¨é‡**: è¿è¡Œ lint æ£€æŸ¥
   ```bash
   uv run ruff check .
   ```

---

## ğŸ¯ å®Œæ•´å‘å¸ƒæµç¨‹

### 1. æ›´æ–°ç‰ˆæœ¬å·

ç¼–è¾‘ `pyproject.toml`:
```toml
[project]
version = "0.1.0"  # æ›´æ–°ä¸ºæ–°ç‰ˆæœ¬
```

### 2. æäº¤æ›´æ”¹

```bash
git add .
git commit -m "chore: bump version to 0.1.0"
```

### 3. åˆ›å»º Git Tag

```bash
git tag -a v0.1.0 -m "Release v0.1.0"
```

### 4. æ„å»ºåˆ†å‘åŒ…

```bash
# æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶
rm -rf dist/ build/ *.egg-info

# æ„å»ºæ–°åŒ…
uv build
```

### 5. éªŒè¯æ„å»ºç»“æœ

```bash
# æŸ¥çœ‹æ„å»ºçš„æ–‡ä»¶
ls -lh dist/

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š
# lark_agent-0.1.0-py3-none-any.whl
# lark-agent-0.1.0.tar.gz
```

### 6. æµ‹è¯•å®‰è£…

```bash
# åœ¨ä¸´æ—¶ç¯å¢ƒä¸­æµ‹è¯•å®‰è£…
uv tool install dist/lark_agent-0.1.0-py3-none-any.whl

# æµ‹è¯•å‘½ä»¤æ˜¯å¦å¯ç”¨
lark-agent --version  # å¦‚æœæ”¯æŒçš„è¯
```

### 7. æ¨é€åˆ°è¿œç¨‹ä»“åº“

```bash
# æ¨é€ä»£ç å’Œ tag
git push origin main
git push origin v0.1.0
```

---

## ğŸ“¦ å‘å¸ƒåˆ° PyPIï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦å‘å¸ƒåˆ° PyPIï¼š

```bash
# å®‰è£…æ„å»ºå·¥å…·
uv pip install build twine

# æ„å»ºåŒ…
uv build

# ä¸Šä¼ åˆ° PyPIï¼ˆéœ€è¦å…ˆé…ç½® credentialsï¼‰
twine upload dist/*
```

---

## ğŸ” éªŒè¯å®‰è£…

å®‰è£…åéªŒè¯ï¼š

```bash
# æ£€æŸ¥å‘½ä»¤æ˜¯å¦å¯ç”¨
which lark-agent

# æ£€æŸ¥ Python æ¨¡å—æ˜¯å¦å¯å¯¼å…¥
python -c "from src.mcp_server import main; print('âœ“ OK')"
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ„å»ºç³»ç»Ÿ**: ç¡®ä¿ `hatchling` å·²æ­£ç¡®é…ç½®åœ¨ `[build-system]` ä¸­
2. **åŒ…ç»“æ„**: ç¡®ä¿ `[tool.hatch.build.targets.wheel]` ä¸­æŒ‡å®šçš„åŒ…è·¯å¾„æ­£ç¡®
3. **ä¾èµ–é”å®š**: å¦‚æœä½¿ç”¨ `uv.lock`ï¼Œç¡®ä¿é”å®šæ–‡ä»¶æ˜¯æœ€æ–°çš„
4. **ç‰ˆæœ¬å·**: éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼ˆSemantic Versioningï¼‰

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ï¼šæ„å»ºå¤±è´¥ï¼Œæç¤ºæ‰¾ä¸åˆ°åŒ…

**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ `[tool.hatch.build.targets.wheel]` é…ç½®ï¼Œç¡®ä¿ `packages = ["src"]` æ­£ç¡®

### é—®é¢˜ï¼šå®‰è£…åå‘½ä»¤ä¸å¯ç”¨

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ `[project.scripts]` é…ç½®
- ç¡®ä¿ `~/.local/bin` åœ¨ PATH ä¸­ï¼ˆLinux/macOSï¼‰
- ç¡®ä¿ `%USERPROFILE%\.local\bin` åœ¨ PATH ä¸­ï¼ˆWindowsï¼‰

### é—®é¢˜ï¼šå¯¼å…¥æ¨¡å—å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ `src/` ç›®å½•ç»“æ„ï¼Œç¡®ä¿æ‰€æœ‰ `__init__.py` æ–‡ä»¶å­˜åœ¨
